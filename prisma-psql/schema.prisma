// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider      = "prisma-client-js"
  output        = "./client"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_PSQL")
}

model admin {
  id       Int       @id @default(autoincrement())
  name     String    @db.VarChar(20)
  period   DateTime?
  year     Int?
  semester String?   @db.VarChar(20)
}

model article {
  no            Int      @id @default(autoincrement())
  title         String   @db.VarChar(255)
  content       String   @db.Text
  date          DateTime
  writer_id     Int
  writer_name   String   @db.VarChar(20)
  bbs_url       String   @db.VarChar(20) // renamed
  bbs_name      String   @db.VarChar(20) // renamed
  images_on_top Boolean
  is_notice     Boolean
  render_type   String   @default("markdown") @db.VarChar(20)
}

model board {
  bbs_url  Int    @id @default(autoincrement()) // renamed
  bbs_name String @db.VarChar(20) // renamed
  position Int
}

model comment {
  no          Int      @id @default(autoincrement())
  content     String   @db.Text
  date        DateTime
  writer_id   Int
  writer_name String   @db.VarChar(20)
  article_id  Int
}

model file {
  no              Int    @id @default(autoincrement())
  s_name          String @db.VarChar(255)
  filename        String @db.VarChar(255)
  target_category Int
  article_id      Int?
  project_id      Int?
}

model index {
  id      Int    @id @default(autoincrement())
  content String @db.Text
}

model panorama {
  id         Int      @id @default(autoincrement())
  date       DateTime @map("date")
  actor_id   Int
  article_id Int
  action     Int
}

model project {
  no           Int       @id @default(autoincrement())
  name         String    @db.VarChar(255)
  genre        String    @db.VarChar(255)
  is_public    Boolean
  introduction String    @db.Text
  thumbnail    String    @db.VarChar(255)
  status       String    @default("working") @db.VarChar(20)
  bbs_url      Int // renamed
  orderer_id   Int
  start_date   DateTime
  finish_date  DateTime?
  detail       String?   @db.Text
  executable   String?   @db.VarChar(255)
  is_show_page Boolean?
}

model promote {
  no             Int    @id @default(autoincrement())
  requester_id   Int
  requester_name String @db.VarChar(20)
  bbs_url        Int // renamed
  start_year     Int
  start_semester String @db.VarChar(20)
}

model purchase {
  no             Int     @id @default(autoincrement())
  product_name   String  @db.VarChar(255)
  about          String  @db.VarChar(200)
  url            String  @db.VarChar(255)
  article_id     Int     @unique
  start_year     Int
  start_semester String  @db.VarChar(20)
  is_complete    Boolean
  requester      String  @db.VarChar(20)
}

model sessions {
  no             Int     @id @default(autoincrement())
  title          String? @db.VarChar(255)
  introduction   String? @db.Text
  public_level   Int?
  s_filename     String? @db.VarChar(255)
  filename       String? @db.VarChar(255)
  workshop_id    Int
  presenter_id   Int?
  presenter_name String  @db.VarChar(20)
  present_order  Int
}

model study {
  no           Int       @id @default(autoincrement())
  name         String    @db.VarChar(255)
  introduction String    @db.Text
  status       String    @default("working") @db.VarChar(20)
  bbs_url      Int // renamed
  start_date   DateTime
  finish_date  DateTime?
  orderer_id   Int
}

model tag {
  no              Int     @id @default(autoincrement())
  content         String  @db.VarChar(255)
  tagger_id       Int
  tagger_name     String  @db.VarChar(20)
  target_category Int
  target_id       Int
  is_public       Boolean
  base_id         Int
}

model tagcount {
  no      Int    @id @default(autoincrement())
  content String @db.VarChar(255)
  count   Int    @default(1)
}

model term {
  id      Int    @id @default(autoincrement())
  content String @db.Text
}

model user {
  no           Int     @id @default(autoincrement())
  id           String  @unique @db.VarChar(20)
  passwd       String  @db.VarChar(128)
  name         String  @db.VarChar(20)
  email        String  @db.VarChar(50)
  email_public Boolean
  phone        String  @db.VarChar(20)
  phone_public Boolean
  year         Int?
  dept         String  @db.VarChar(50)
  level        String  @db.VarChar(10)
  theme        String  @default("default") @db.VarChar(20)
  wanttodo     String  @db.Text // renamed
  profile      String? @db.Text
}

model user_project_link {
  no         Int @id @default(autoincrement())
  user_id    Int
  project_id Int
}

model user_promote_link {
  no         Int @id @default(autoincrement())
  user_id    Int
  request_id Int
}

model user_purchase_link {
  no         Int @id @default(autoincrement())
  user_id    Int
  request_id Int
}

model user_study_link {
  no       Int @id @default(autoincrement())
  user_id  Int
  study_id Int
}

model user_workshop_link {
  no          Int @id @default(autoincrement())
  user_id     Int
  workshop_id Int
}

model workshop {
  no         Int      @id @default(autoincrement())
  nth        Int      @unique
  place      String   @db.VarChar(20)
  start_date DateTime
}
